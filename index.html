<html>
	<head>
		<title> Calculadora de resultados de las Eliminatorias Rusia 2018</title>
	</head>
	<body>
		<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

		<style type="text/css">
			.tg {
				border-collapse: collapse;
				border-spacing: 0;
				border-color: #999;
				border: none;
				width: 450px;
			}
			.tg td {
				font-family: Arial, sans-serif;
				font-size: 14px;
				padding: 10px 5px;
				border-style: solid;
				border-width: 0px;
				overflow: hidden;
				word-break: normal;
				border-color: #999;
				color: #444;
				background-color: #F7FDFA;
			}
			.tg th {
				font-family: Arial, sans-serif;
				font-size: 14px;
				font-weight: normal;
				padding: 10px 5px;
				border-style: solid;
				border-width: 0px;
				overflow: hidden;
				word-break: normal;
				border-color: #999;
				color: #fff;
				background-color: #26ADE4;
			}
			.tg .tg-vn4c {
				background-color: #D2E4FC
			}
			.tg .tg-yw4l {
				vertical-align: top
			}
			.tg .tg-6k2t {
				background-color: #D2E4FC;
				vertical-align: top
			}
		</style>

		<table class="tg">
			<tr>
				<th colspan="4" class="tg-031e">Martes 15 de Noviembre</th>
			</tr>
			<tr>
				<td class="tg-vn4c">17:00</td>
				<td class="tg-6k2t">Bolivia</td>
				<td class="tg-vn4c">
				<select data-t1="bolivia" data-t2="paraguay" id="p1" class="resultados">
					<option value="0" selected="selected">Seleccionar resultado</option><option value="l">Gana Bolivia</option><option value="e">Empatan</option><option value="v">Gana Paraguay</option>
				</select></td>
				<td class="tg-vn4c">Paraguay</td>
			</tr>
			<tr>
				<td class="tg-031e">18:00</td>
				<td class="tg-yw4l">Ecuador</td>
				<td class="tg-031e">
				<select data-t1="ecuador" data-t2="venezuela" id="p2" class="resultados">
					<option value="0" selected="selected">Seleccionar resultado</option><option value="l">Gana Ecuador</option><option value="e">Empatan</option><option value="v">Gana Venezuela</option>
				</select></td>
				<td class="tg-031e">Venezuela</td>
			</tr>
			<tr>
				<td class="tg-6k2t">20:30</td>
				<td class="tg-6k2t">Argentina</td>
				<td class="tg-vn4c">
				<select data-t1="argentina" data-t2="colombia" id="p3" class="resultados">
					<option value="0" selected="selected">Seleccionar resultado</option><option value="l">Gana Argentina</option><option value="e">Empatan</option><option value="v">Gana Colombia</option>
				</select></td>
				<td class="tg-6k2t">Colombia</td>
			</tr>
			<tr>
				<td class="tg-yw4l">20:30</td>
				<td class="tg-yw4l">Chile</td>
				<td class="tg-yw4l">
				<select data-t1="chile" data-t2="uruguay"  id="p4" class="resultados">
					<option value="0" selected="selected">Seleccionar resultado</option><option value="l">Gana Chile</option><option value="e">Empatan</option><option value="v">Gana Uruguay</option>
				</select></td>
				<td class="tg-yw4l">Uruguay</td>
			</tr>
			<tr>
				<td class="tg-6k2t">23:15</td>
				<td class="tg-6k2t">Perú</td>
				<td class="tg-6k2t">
				<select data-t1="peru" data-t2="brasil" id="p5" class="resultados">
					<option value="0" selected="selected">Seleccionar resultado</option><option value="l">Gana Perú</option><option value="e">Empatan</option><option value="v">Gana Brasil</option>
				</select></td>
				<td class="tg-6k2t">Brasil</td>
			</tr>
		</table>

		<div style="margin-top:20px;margin-bottom:20px">
			<button id="btn_simular">
				Simular resultados
			</button>
		</div>

		<hr>

		<table class="tg" id="posiciones">
			<tr>
				<th class="tg-031e">Posición</th>
				<th class="tg-031e">Equipo</th>
				<th class="tg-031e">Puntos</th>
			</tr>
			<tr>
				<td class="tg-vn4c">1</td>
				<td class="tg-vn4c">Brasil</td>
				<td class="tg-vn4c">24</td>
			</tr>
			<tr>
				<td class="tg-031e">2</td>
				<td class="tg-031e">Uruguay</td>
				<td class="tg-031e">23</td>
			</tr>
			<tr>
				<td class="tg-vn4c">3</td>
				<td class="tg-vn4c">Colombia</td>
				<td class="tg-vn4c">18</td>
			</tr>
			<tr>
				<td class="tg-031e">4</td>
				<td class="tg-031e">Ecuador</td>
				<td class="tg-031e">17</td>
			</tr>
			<tr>
				<td class="tg-vn4c">5</td>
				<td class="tg-vn4c">Chile</td>
				<td class="tg-vn4c">17</td>
			</tr>
			<tr>
				<td class="tg-yw4l">6</td>
				<td class="tg-yw4l">Argentina</td>
				<td class="tg-yw4l">16</td>
			</tr>
			<tr>
				<td class="tg-6k2t">7</td>
				<td class="tg-6k2t">Paraguay</td>
				<td class="tg-6k2t">15</td>
			</tr>
			<tr>
				<td class="tg-yw4l">8</td>
				<td class="tg-yw4l">Perú</td>
				<td class="tg-yw4l">14</td>
			</tr>
			<tr>
				<td class="tg-6k2t">9</td>
				<td class="tg-6k2t">Venezuela</td>
				<td class="tg-6k2t">5</td>
			</tr>
			<tr>
				<td class="tg-yw4l">10</td>
				<td class="tg-yw4l">Bolivia</td>
				<td class="tg-yw4l">4</td>
			</tr>
		</table>

		<script>
			$(document).ready(function() {

				var br = 24;
				var uy = 23;
				var co = 18;
				var ec = 17;
				var cl = 17;
				var ar = 16;
				var py = 15;
				var pe = 14;
				var ve = 5;
				var bo = 4;

				$("#btn_simular").click(function() {

					$('.resultados').each(function(i, obj) {

						if ($(obj).val() == 0) {
							alert('Por favor completa el resultado de todos los partidos');
							return false;
						} else {

							if ($(obj).attr('id') == 'p1') {
								if ($(obj).val() == 'l') {
									bo = bo + 3;
								}
								if ($(obj).val() == 'v') {
									py = py + 3;
								}
								if ($(obj).val() == 'e') {
									bo = bo + 1;
									py = py + 1;
								}
							}

							if ($(obj).attr('id') == 'p2') {
								if ($(obj).val() == 'l') {
									ec = ec + 3;
								}
								if ($(obj).val() == 'v') {
									ve = ve + 3;
								}
								if ($(obj).val() == 'e') {
									ec = ec + 1;
									ve = ve + 1;
								}
							}

							if ($(obj).attr('id') == 'p3') {
								if ($(obj).val() == 'l') {
									ar = ar + 3;
								}
								if ($(obj).val() == 'v') {
									co = co + 3;
								}
								if ($(obj).val() == 'e') {
									ar = ar + 1;
									co = co + 1;
								}
							}

							if ($(obj).attr('id') == 'p4') {
								if ($(obj).val() == 'l') {
									cl = cl + 3;
								}
								if ($(obj).val() == 'v') {
									uy = uy + 3;
								}
								if ($(obj).val() == 'e') {
									cl = cl + 1;
									uy = uy + 1;
								}
							}

							if ($(obj).attr('id') == 'p5') {
																
								if ($(obj).val() == 'l') {
									pe = pe + 3;
								}
								if ($(obj).val() == 'v') {
									br = br + 3;
								}
								if ($(obj).val() == 'e') {
									pe = pe + 1;
									br = br + 1;
								}
							}


						}

												
					});

						var posiciones = [
						  ['Brasil', br],
						  ['Uruguay', uy],
						  ['Colombia', co],
						  ['Ecuador', ec],
						  ['Chile', cl],
						  ['Argentina', ar],
						  ['Paraguay', py],
						  ['Perú', pe],
						  ['Venezuela', ve],
						  ['Bolivia', bo],
						];	
						
						posiciones.sort((function(index){
						    return function(a, b){
						        return (a[index] === b[index] ? 0 : (a[index] > b[index] ? -1 : 1));
						    };
						})(1));

						refreshPosiciones(posiciones);

				});
				
				function refreshPosiciones(p) {
					
					l = '';
					
					$('#posiciones').children().remove();
					
					l = '<tr><th class="tg-031e">Posición</th><th class="tg-031e">Equipo</th><th class="tg-031e">Puntos</th></tr>';
					$('#posiciones').append(l);
					
					for(i=0;i<p.length;i++) {
						
						var cls = 'tg-vn4c';
						
						if(i%2 == 0) {
							cls = 'tg-031e';
						}
						var ii = i+1;

						l = '<tr><td class="'+cls+'">'+ii+'</td><td class="'+cls+'">'+p[i][0]+'</td><td class="'+cls+'">'+p[i][1]+'</td></tr>';
						$('#posiciones').append(l);

					}
					
					
				}
			});
		</script>
	</body>
</html>